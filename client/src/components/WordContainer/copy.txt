 useEffect(() => {
    if (!typed.length) {
      dispatch(setCorrectTypedIndex(-1));
      return;
    }
    setTestStarted(true);
    setIsWrong(typed[typed.length - 1] !== activeWord[typed.length - 1]);
    // setIsWrong(typed[currentIndexInWord] !== activeWord[currentIndexInWord]);

    if (isWrong) {
      // setTyped(typed.substring(0, currentIndexInWord)); // ADDED
      dispatch(setWrongIndex(typed.length - 1));
      // dispatch(setWrongIndex(currentIndexInWord));
      return;
    } else if (
      typed.length === activeWord.length + 1 &&
      typed[typed.length - 1] === " "
    ) {
      dispatch(incrementActiveIndex());
      setTyped("");
      setIsWrong(false);
    } else {
      dispatch(setCorrectTypedIndex(typed.length - 1));
      // dispatch(setCorrectTypedIndex(currentIndexInWord));
    }
  }, [typed, dispatch, isWrong]);

  useEffect(() => {
    if (locRef.current) {
      const containerHeight =
        wordContainerRef.current.getBoundingClientRect().y;
      const enterSymbolHeight = locRef.current.getBoundingClientRect().y;

      if (firstDiffOfHeight === -1.0)
        setFirstDiffOfHeight(enterSymbolHeight - containerHeight);
      if (
        enterSymbolHeight - containerHeight !== firstDiffOfHeight &&
        firstDiffOfHeight !== -1.0 &&
        secondDiffOfHeight === -1.0
      )
        setSecondDiffOfHeight(enterSymbolHeight - containerHeight);

      if (
        secondDiffOfHeight !== -1.0 &&
        enterSymbolHeight - containerHeight > 0.1 + secondDiffOfHeight
      ) {
        wordContainerRef.current.scrollTop +=
          enterSymbolHeight - containerHeight - firstDiffOfHeight;
      }
    }
  });

  function onTextAreaChange(e) {
    if (isWrong && e.target.value.length < typed.length) {
      setTyped(e.target.value);
      setIsWrong(false);
      dispatch(setWrongIndex(-1));
    } else if (isWrong) setTyped(typed);
    else setTyped(e.target.value);
  }